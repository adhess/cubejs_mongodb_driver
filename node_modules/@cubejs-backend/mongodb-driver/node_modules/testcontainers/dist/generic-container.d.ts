/// <reference types="node" />
import { Duration } from "node-duration";
import { BoundPorts } from "./bound-ports";
import { Container, Id as ContainerId } from "./container";
import { AuthConfig, BindMode, BuildContext, Command, ContainerName, Dir, DockerClient, EnvKey, EnvValue, ExecResult, HealthCheck, NetworkMode, TmpFs } from "./docker-client";
import { DockerClientFactory, Host } from "./docker-client-factory";
import { Port } from "./port";
import { PullPolicy } from "./pull-policy";
import { Image, Tag } from "./repo-tag";
import { OptionalStopOptions, StartedTestContainer, StoppedTestContainer, TestContainer } from "./test-container";
import { Uuid } from "./uuid";
import { WaitStrategy } from "./wait-strategy";
export declare class GenericContainerBuilder {
    private readonly context;
    private readonly dockerfileName;
    private readonly uuid;
    private readonly dockerClientFactory;
    private buildArgs;
    constructor(context: BuildContext, dockerfileName: string, uuid?: Uuid, dockerClientFactory?: DockerClientFactory);
    withBuildArg(key: string, value: string): GenericContainerBuilder;
    build(): Promise<GenericContainer>;
}
export declare class GenericContainer implements TestContainer {
    readonly image: Image;
    readonly tag: Tag;
    readonly dockerClientFactory: DockerClientFactory;
    static fromDockerfile(context: BuildContext, dockerfileName?: string): GenericContainerBuilder;
    private readonly repoTag;
    private readonly dockerClient;
    private env;
    private networkMode?;
    private ports;
    private cmd;
    private bindMounts;
    private name?;
    private tmpFs;
    private healthCheck?;
    private waitStrategy?;
    private startupTimeout;
    private useDefaultLogDriver;
    private privilegedMode;
    private authConfig?;
    private pullPolicy;
    constructor(image: Image, tag?: Tag, dockerClientFactory?: DockerClientFactory);
    start(): Promise<StartedTestContainer>;
    withAuthentication(authConfig: AuthConfig): this;
    withCmd(cmd: Command[]): this;
    withName(name: ContainerName): this;
    withEnv(key: EnvKey, value: EnvValue): this;
    withTmpFs(tmpFs: TmpFs): this;
    withNetworkMode(networkMode: NetworkMode): this;
    withExposedPorts(...ports: Port[]): this;
    withBindMount(source: Dir, target: Dir, bindMode?: BindMode): this;
    withHealthCheck(healthCheck: HealthCheck): this;
    withStartupTimeout(startupTimeout: Duration): this;
    withWaitStrategy(waitStrategy: WaitStrategy): this;
    withDefaultLogDriver(): this;
    withPrivilegedMode(): this;
    withPullPolicy(pullPolicy: PullPolicy): this;
    isImageCached(): Promise<boolean>;
    protected isCreating?(boundPorts: BoundPorts): void;
    private waitForContainer;
    private getWaitStrategy;
}
export declare class StartedGenericContainer implements StartedTestContainer {
    private readonly container;
    private readonly host;
    private readonly boundPorts;
    private readonly name;
    private readonly dockerClient;
    constructor(container: Container, host: Host, boundPorts: BoundPorts, name: ContainerName, dockerClient: DockerClient);
    stop(options?: OptionalStopOptions): Promise<StoppedTestContainer>;
    getContainerIpAddress(): Host;
    getMappedPort(port: Port): Port;
    getId(): ContainerId;
    getName(): ContainerName;
    exec(command: Command[]): Promise<ExecResult>;
    logs(): Promise<NodeJS.ReadableStream>;
}
